<html lang="en">
	<head>
		<%- include('partials/head') %>
	</head>
	<body>
		<header><%- include('partials/header'); %></header>
		<main class="container">
			<div class="row">
				<div class="col-md-12">
					<h1>
						<%- new Date(entry.date).toLocaleDateString() %>
					</h1>
					<% if(validationErrors.length > 0) { %>
					<div class="alert alert-danger">
						<ul>
							<% validationErrors.forEach((error) => { %>
							<li><%= error.msg %></li>
							<% }); %>
						</ul>
					</div>
					<% } %>
					<form action="/entries/<%- entry.id %>" method="post">
						<div class="form-group">
							<label for="date">Date</label>
							<input
								type="date"
								class="form-control"
								id="date"
								name="date"
								value="<%= dateVal %>"
								max="<%= today %>"
							/>
						</div>
						<div class="form-group">
							<label for="comment">Comment</label>
							<input
								type="text"
								class="form-control"
								id="comment"
								name="comment"
								value="<%- entry.comment %>"
							/>
						</div>
						<div class="form-group">
							<label for="plusTags">Plus tags</label>
							<select
								name="plusTags"
								id="plusTags"
								multiple
								class="form-control"
							>
								<option value="">None...</option>
								<% tags.forEach((tag) => { %>
								<option value="<%= tag.id %>" <%= entry.plusTags.some(plusTag => plusTag.id === tag.id) ? "selected" : "" %>>
									<%= tag.name %>
								</option>
								<% }); %>
							</select>
						</div>
						<div class="form-group">
							<label for="minusTags">Minus tags</label>
							<select
								name="minusTags"
								id="minusTags"
								multiple
								class="form-control"
							>
								<option value="">None...</option>
								<% tags.forEach((tag) => { %>
								<option value="<%= tag.id %>" <%= entry.minusTags.some(minusTag => minusTag.id === tag.id) ? "selected" : "" %>>
									<%= tag.name %>
								</option>
								<% }); %>
							</select>
						</div>
						<div class="form-group mt-2">
							<button type="submit" class="btn btn-primary">
								Update
							</button>
						</div>
					</form>
				</div>
			</div>
		</main>
	</body>
</html>
